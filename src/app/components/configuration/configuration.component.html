<app-page-wrapper>
  <div title>Analyzer configuration</div>

  <div actions class="actions">
    @if (isReadonly()) {
      <app-button (click)="isReadonly.set(false)">Edit</app-button>
    } @else {
      <app-button secondary (click)="isReadonly.set(true)">Cancel</app-button>
      <app-button>Save</app-button>
    }
  </div>

  @if (configurationRes.isLoading()) {
    Loading...
    <!-- @todo: ??? it's empty for some reason -->
    <p-skeleton height="10rem" />
  } @else {
    @let configuration = configurationRes.value()!;
    @if (isReadonly()) {
      <app-configuration-template>
        <div mac-source>
          Source:
          @for (mac of configuration?.mac_source; track $index) {
            <app-pill>{{ mac }}</app-pill>
          }
        </div>
        <div mac-destination>
          Destination:
          @for (mac of configuration?.mac_destination; track $index) {
            <app-pill>{{ mac }}</app-pill>
          }
        </div>
        <div frames>
          @for (frame of configuration?.frame_range; track $index) {
            <app-pill>{{ frame }}</app-pill>
          }
        </div>
        <div protocols>
          @for (protocol of configuration?.protocol; track $index) {
            <app-pill>{{ protocol }}</app-pill>
          }
        </div>
      </app-configuration-template>
    } @else {
      <app-configuration-form [configuration]="configuration" />
    }
  }
</app-page-wrapper>
