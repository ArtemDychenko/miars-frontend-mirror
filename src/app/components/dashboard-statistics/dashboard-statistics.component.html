<div class="statistics">
  @let statistics = dashboardStatistics | async;
  @if (!statistics) {
    <div class="statistics__loader">
      @for (_ of [].constructor(4); track $index) {
        <ngx-skeleton-loader count="7" />
      }
    </div>
  } @else {
    <div class="statistics__table">
      <div class="statistics__table__time">
        <p>Total time: {{ statistics.total_time | time }} </p>
      </div>
      @if (showAnyStatisticsColumn && showStatisticsRowsAndCharts) {
        <table class="statistics__table__header">
          <thead class="statistics__table__header-title">
          <tr>
            <th></th>
            @if (settings?.showTotalPackets) {
              <th>Total packets</th>
            }
            @if (settings?.showPacketsPerSec) {
              <th>Packets per second</th>
            }
            @if (settings?.showTotalBytes) {
              <th>Total bytes</th>
            }
            @if (settings?.showBytesPerSec) {
              <th>Bytes per second</th>
            }
          </tr>
          </thead>
          @if (settings?.showETH) {
            <tbody>
              @let protocolEth = getETHStatistics(statistics.protocols);
            <tr class="statistics__table__header-eth">
              <td>{{ protocolEth.name }}</td>
              @if (settings?.showTotalPackets) {
                <td>{{ protocolEth.total_packets | decimal }}</td>
              }
              @if (settings?.showPacketsPerSec) {
                <td>
                  {{ getPerSecond(protocolEth.total_packets, statistics.total_time) | decimal }}
                </td>
              }
              @if (settings?.showTotalBytes) {
                <td>{{ protocolEth.total_bytes | decimal }}</td>
              }
              @if (settings?.showBytesPerSec) {
                <td>
                  {{ getPerSecond(protocolEth.total_bytes, statistics.total_time) | decimal }}
                </td>
              }
            </tr>
            </tbody>
          }
        </table>

        <table class="statistics__table__protocols">
          <tbody>
            @for (protocol of getProtocols(statistics.protocols); track protocol.name) {
              @if (showProtocolRow(protocol.name)) {
                <tr>
                  <td>{{ protocol.name }}</td>
                  @if (settings?.showTotalPackets) {
                    <td>{{ protocol.total_packets | decimal }}</td>
                  }
                  @if (settings?.showPacketsPerSec) {
                    <td>
                      {{ getPerSecond(protocol.total_packets, statistics.total_time) | decimal }}
                    </td>
                  }
                  @if (settings?.showTotalBytes) {
                    <td>{{ protocol.total_bytes | decimal }}</td>
                  }
                  @if (settings?.showBytesPerSec) {
                    <td>
                      {{ getPerSecond(protocol.total_bytes, statistics.total_time) | decimal }}
                    </td>
                  }
                </tr>
              }
            }
          </tbody>
        </table>
      }
      @if (showInformationRate) {
      <table class="statistics__table__ir">
        <thead class="statistics__table__ir-header">
        <tr>
          <th></th>
          @if (settings?.showMinValue) {
            <th>Min</th>
          }
          @if (settings?.showMaxValue) {
            <th>Max</th>
          }
          @if (settings?.showCurrentValue) {
            <th>Current</th>
          }
        </tr>
        </thead>
        <tbody>
        <tr class="statistics__table_ir-content">
          <td>Information Rate</td>
          @if (settings?.showMinValue) {
            <td>{{ statistics.information_rate.min | decimal }}</td>
          }
          @if (settings?.showMaxValue) {
            <td>{{ statistics.information_rate.max | decimal }}</td>
          }
          @if (settings?.showCurrentValue) {
            <td>{{ statistics.information_rate.current | decimal }}</td>
          }
        </tr>
        </tbody>
      </table>
      }
    </div>
  }
</div>
